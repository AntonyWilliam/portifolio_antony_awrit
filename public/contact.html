<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="favicon.png" type="image/png">
    <title>Contact - Antony William</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/contact.css">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <script type="text/javascript">
        (function() {
            // Initialize EmailJS with the public key (from EmailJS dashboard)
            emailjs.init({
              publicKey: "8uraiXsn_cvxE85zu",
            });
            console.log("EmailJS initialized with public key");
        })();
    </script>
    <!-- Common styles moved to common.css and contact.css -->
</head>
<body style="padding-top: 4rem;"> <!-- Reduced top padding -->
    <!-- Header Placeholder - Will be populated by common.js -->
    <div id="header-placeholder"></div>
    
    <main>
    <div class="container" style="padding-top: 0;">
        <!-- Contact Section -->
        <section class="contact-section" id="contact">
            <div class="section-transition-overlay"></div>
            <div class="container">
                <div class="contact-header">
                    <h2 class="contact-title">Let's Work Together</h2>
                    <p class="contact-subtitle">Ready to enhance your documentation? Let's talk.</p>
                </div>
                
                <div class="contact-grid">
                    <div class="contact-form-container">
                        <form id="contact-form" class="contact-form" style="position: relative; z-index: 100;">
                            <!-- Kept for backwards compatibility but not used -->
                            <div id="success-message" class="alert alert-success" style="display: none;">
                                Your message has been sent successfully! I'll get back to you soon.
                            </div>
                            <div id="error-message" class="alert alert-error">
                                There was an error sending your message. Please try again later.
                            </div>
                            
                            <div class="form-group">
                                <label for="name">Your Name</label>
                                <input type="text" id="name" name="user_name" class="form-control" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="email">Your Email</label>
                                <input type="email" id="email" name="user_email" class="form-control" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="subject">Subject</label>
                                <input type="text" id="subject" name="subject" class="form-control" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="message">Your Message</label>
                                <textarea id="message" name="message" class="form-control" rows="5" required></textarea>
                            </div>
                            
                            <!-- Hidden field for recipient name -->
                            <input type="hidden" name="to_name" value="Antony William">
                            
                            <button type="submit" class="btn-submit" id="submit-btn">Send Message</button>
                        </form>
                    </div>
                    
                    <div class="contact-info-container">
                        <div class="contact-social">
                            <h3>Connect With Me</h3>
                            <div class="social-icons">
                                <a href="https://www.linkedin.com/in/antony-william/" target="_blank"><i class="fab fa-linkedin"></i></a>
                                <a href="https://github.com/AntonyWilliam" target="_blank"><i class="fab fa-github"></i></a>
                                <a href="https://wa.me/5512988965741" target="_blank"><i class="fab fa-whatsapp"></i></a>
                                <a href="https://t.me/+5512988965741" target="_blank"><i class="fab fa-telegram"></i></a>
                                <a href="mailto:antonyramalhopro@gmail.com"><i class="fas fa-envelope"></i></a>
                            </div>
                        </div>
                        
                        <div class="contact-card">
                            <div class="contact-icon">
                                <i class="fas fa-map-marker-alt"></i>
                            </div>
                            <div class="contact-details">
                                <h3>Location</h3>
                                <p>Based in SÃ£o Paulo, Brazil</p>
                                <p>Available for remote projects worldwide</p>
                            </div>
                        </div>
                        
                        <div class="contact-card">
                            <div class="contact-icon">
                                <i class="fas fa-language"></i>
                            </div>
                            <div class="contact-details">
                                <h3>Languages</h3>
                                <div class="language-skills">
                                    <div class="language">
                                        <span class="language-name">English</span>
                                        <div class="proficiency-bar">
                                            <div class="proficiency-level" style="width:100%"></div>
                                        </div>
                                    </div>
                                    <div class="language">
                                        <span class="language-name">Portuguese</span>
                                        <div class="proficiency-bar">
                                            <div class="proficiency-level" style="width:100%"></div>
                                        </div>
                                    </div>
                                    <div class="language">
                                        <span class="language-name">Spanish</span>
                                        <div class="proficiency-bar">
                                            <div class="proficiency-level" style="width:90%"></div>
                                        </div>
                                    </div>
                                    <div class="language">
                                        <span class="language-name" style="display: flex; justify-content: space-between; width: 100%;">
                                            Chinese (Mandarin)
                                            <span class="studying-note" style="color: var(--gold); font-size: 0.8rem; font-style: italic;">Studying</span>
                                        </span>
                                        <div class="proficiency-bar">
                                            <div class="proficiency-level" style="width:20%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="contact-card">
                            <div class="contact-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="contact-details">
                                <h3>Availability</h3>
                                <p>5 days notice period after signing contract</p>
                                <p>Response time: Within 24 hours</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Footer removed for cleaner design -->

    <!-- Scripts -->
    <script>
        // Main form submission handler - using the approach from the example
        window.onload = function() {
            // Keep test button functionality for debugging
            addTestButton();
            
            document.getElementById('contact-form').addEventListener('submit', function(event) {
                event.preventDefault();
                
                // Set loading state
                document.getElementById('submit-btn').textContent = 'Sending...';
                document.getElementById('submit-btn').disabled = true;
                
                // Hide any previous messages
                document.getElementById('success-message').style.display = 'none';
                document.getElementById('error-message').style.display = 'none';
                
                // Simple approach following the example - just send the form directly
                // Gmail service with the correct template ID
                emailjs.sendForm('service_8ca4upp', 'template_ixcdi8b', this)
                    .then(function() {
                        console.log('SUCCESS!');
                        
                        // Get the user's name for the personalized message
                        const nameField = document.getElementById('name');
                        const senderName = nameField.value || 'there';
                        
                        // Update and show the modal with personalized message
                        document.getElementById('sender-name').textContent = senderName;
                        const modal = document.getElementById('success-modal');
                        modal.classList.add('active');
                        
                        // Reset form
                        document.getElementById('contact-form').reset();
                        
                        // Set up close button for modal
                        document.getElementById('modal-close-btn').addEventListener('click', function() {
                            modal.classList.remove('active');
                        });
                        
                        // Also allow clicking outside to close
                        modal.addEventListener('click', function(e) {
                            if (e.target === modal) {
                                modal.classList.remove('active');
                            }
                        });
                    })
                    .catch(function(error) {
                        console.log('FAILED...', error);
                        
                        // Show error message with details if available
                        const errorMsg = document.getElementById('error-message');
                        errorMsg.innerHTML = 'There was an error sending your message. Please try again later.';
                        
                        // Add the specific error if available
                        if (error && error.text) {
                            errorMsg.innerHTML += '<br>Error: ' + error.text;
                        } else if (error && error.message) {
                            errorMsg.innerHTML += '<br>Error: ' + error.message;
                        }
                        
                        errorMsg.style.display = 'block';
                    })
                    .finally(function() {
                        // Reset button state
                        document.getElementById('submit-btn').textContent = 'Send Message';
                        document.getElementById('submit-btn').disabled = false;
                    });
            });
        };
        
        // Add test button for debugging purposes
        function addTestButton() {
            const testButton = document.createElement("button");
            testButton.textContent = "Test EmailJS";
            testButton.style.position = "fixed";
            testButton.style.bottom = "10px";
            testButton.style.right = "10px";
            testButton.style.zIndex = "9999";
            testButton.style.padding = "8px 12px";
            testButton.style.backgroundColor = "#333";
            testButton.style.color = "#fff";
            testButton.style.border = "none";
            testButton.style.borderRadius = "4px";
            testButton.style.cursor = "pointer";
            testButton.addEventListener("click", function() {
                // Simple test that follows the example approach
                const tempForm = document.createElement('form');
                tempForm.innerHTML = `
                    <input type="hidden" name="user_name" value="Test User">
                    <input type="hidden" name="user_email" value="test@example.com">
                    <input type="hidden" name="subject" value="Test Email">
                    <input type="hidden" name="message" value="This is a test message">
                    <input type="hidden" name="to_name" value="Antony William">
                `;
                document.body.appendChild(tempForm);
                
                emailjs.sendForm('service_8ca4upp', 'template_ixcdi8b', tempForm)
                    .then(function() {
                        console.log('TEST SUCCESS!');
                        alert('Test email sent successfully!');
                        document.body.removeChild(tempForm);
                    })
                    .catch(function(error) {
                        console.log('TEST FAILED...', error);
                        let errorMsg = 'Test failed.';
                        if (error && error.text) {
                            errorMsg += ' ' + error.text;
                        } else if (error && error.message) {
                            errorMsg += ' ' + error.message;
                        }
                        alert(errorMsg);
                        document.body.removeChild(tempForm);
                    });
            });
            document.body.appendChild(testButton);
        }
    </script>
    <script src="js/common.js"></script>
    </main>
    
    <!-- Page Transitions Script -->
    <script src="js/page-transitions.js"></script>
    
    <!-- Success Modal -->
    <div class="modal-overlay" id="success-modal">
        <div class="modal-content">
            <h3 class="modal-title">Thank You!</h3>
            <p class="modal-message">Thanks <span id="sender-name">there</span>, I will get back to you soon.</p>
            <button class="modal-close" id="modal-close-btn">Close</button>
        </div>
    </div>
</body>
</html>